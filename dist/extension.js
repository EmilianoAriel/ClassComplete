"use strict";var F=Object.create;var m=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var b=(e,t)=>{for(var o in t)m(e,o,{get:t[o],enumerable:!0})},h=(e,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of T(t))!P.call(e,i)&&i!==o&&m(e,i,{get:()=>t[i],enumerable:!(a=I(t,i))||a.enumerable});return e};var x=(e,t,o)=>(o=e!=null?F(k(e)):{},h(t||!e||!e.__esModule?m(o,"default",{value:e,enumerable:!0}):o,e)),j=e=>h(m({},"__esModule",{value:!0}),e);var W={};b(W,{activate:()=>E,deactivate:()=>D});module.exports=j(W);var s=x(require("vscode")),p=require("fs"),w=x(require("path"));async function v(e){let t=[],o=s.workspace.getConfiguration().get("fileFilter.includeHtml",!0),a=s.workspace.getConfiguration().get("fileFilter.includeJsx",!0),i=[{extension:".html",include:o},{extension:".jsx",include:a}],u=await p.promises.readdir(e);for(let r of u){let n=w.join(e,r);if((await p.promises.stat(n)).isDirectory()){let f=await v(n);t.push(...f)}else if(i.find(c=>r.endsWith(c.extension)&&c.include)){let c=await p.promises.readFile(n,"utf-8"),g=c.match(/class=["']([^"']+)["']/g)||c.match(/className=["']([^"']+)["']/g);g&&g.forEach(d=>{let l=d.replace(/class=["']/g,"").replace(/className=["']/g,"").replace(/["']/g,"").split(" ");t.push(...l)})}}return Array.from(new Set(t))}async function E(e){let t=s.workspace.workspaceFolders;if(!t){console.error("No hay carpetas en el espacio de trabajo.");return}let o=t[0].uri.fsPath,a=await v(o),i=s.languages.registerCompletionItemProvider({scheme:"file",language:"css"},{provideCompletionItems(r,n,C,f){let c=[];return r.lineAt(n).text.slice(0,n.character).endsWith("*")&&c.push(...a.map(d=>{let l=new s.CompletionItem(d,s.CompletionItemKind.Class);l.insertText=d;let y=new s.Range(n.translate(0,-1),n);return l.additionalTextEdits=[s.TextEdit.delete(y)],l})),c.length?c:void 0}},"*");e.subscriptions.push(i);let u=s.workspace.onWillSaveTextDocument(async r=>{let n=r.document;(n.languageId==="html"||n.languageId==="javascriptreact")&&(a=await v(o))});e.subscriptions.push(u)}function D(){}0&&(module.exports={activate,deactivate});
